<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>AscendemicX — Courses</title>
  <link rel="stylesheet" href="assets/css/styles.css">

  <style>
    .courses-wrapper {
      overflow-x: auto;
      white-space: nowrap;
      padding: 1rem 0;
    }

    .course-card {
      display: inline-block;
      vertical-align: top;
      width: 220px;
      margin-right: 1rem;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      text-align: center;
      padding: 0.75rem;
      transition: transform 0.2s ease;
    }

    .course-card:hover {
      transform: translateY(-4px);
    }

    .course-card img {
      width: 150px;
      height: 150px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 0.5rem;
    }

    .course-card h3 {
      font-size: 1rem;
      margin: 0.5rem 0;
    }

    .course-card p {
      font-size: 0.9rem;
      color: #555;
      margin: 0.25rem 0;
    }

    .muted {
      color: #777;
      font-size: 0.85rem;
    }

    /* Optional scrollbar styling for better UX */
    .courses-wrapper::-webkit-scrollbar {
      height: 8px;
    }
    .courses-wrapper::-webkit-scrollbar-thumb {
      background-color: rgba(0,0,0,0.2);
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container">
      <a class="brand" href="index.html">AscendemicX</a>
      <nav class="main-nav">
        <a href="index.html">Home</a>
        <a href="mentor.html">Mentor</a>
        <a href="faculties.html">Faculties</a>
        <a href="courses.html" class="active">Courses</a>
        <a href="career.html">Career</a>
        <a href="blog.html">Blog</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <h1>Courses</h1>
    <div id="courses-container" class="courses-wrapper"></div>
  </main>

  <footer class="site-footer"><div class="container">© AscendemicX 2025</div></footer>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

  <script src="assets/js/firebase-init.js"></script>
  <script src="assets/js/main.js"></script>

  <script>
  (function(){
    async function resolveStorageUrl(url) {
      if (!url) return null;
      if (url.startsWith('http://') || url.startsWith('https://')) return url;
      if (url.startsWith('gs://')) {
        try {
          const ref = firebase.storage().refFromURL(url);
          return await ref.getDownloadURL();
        } catch (err) {
          console.warn('Storage URL failed:', err);
          return null;
        }
      }
      return null;
    }

    async function loadCourses() {
      const container = document.getElementById('courses-container');
      container.innerHTML = `<p class="muted">Loading courses...</p>`;

      try {
        const snapshot = await db.collection('courses').get();
        if (snapshot.empty) {
          container.innerHTML = `<p class="muted">No courses available yet.</p>`;
          return;
        }

        container.innerHTML = '';

        for (const doc of snapshot.docs) {
          const data = doc.data();
          const imgUrl = await resolveStorageUrl(data.imageUrl);
          const card = document.createElement('div');
          card.className = 'course-card';
          card.innerHTML = `
            ${imgUrl ? `<img src="${imgUrl}" alt="${data.title || 'Course Image'}">` : ''}
            <h3>${data.title || 'Untitled Course'}</h3>
            ${data.duration ? `<p class="muted">${data.duration}</p>` : ''}
            ${data.details ? `<p>${data.details}</p>` : ''}
          `;
          container.appendChild(card);
        }
      } catch (err) {
        console.error('Error loading courses:', err);
        container.innerHTML = `<p class="muted">Failed to load courses. Check console.</p>`;
      }
    }

    document.addEventListener('DOMContentLoaded', loadCourses);
  })();
  </script>
</body>
</html>
